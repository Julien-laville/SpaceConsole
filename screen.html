<div id="info"></div>
<div id="debug"></div>
<canvas id="sc"></canvas>
<script type="text/javascript" src="https://www.airconsole.com/api/airconsole-1.7.0.js"></script>
<script type="text/javascript" src="v2d.js"></script>
<script type="text/javascript" src="src/space_game.js"></script>
<style>
    BODY {
        background: #fff;
    }
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    CANVAS {
        border: 1px solid red
    }
</style>


<script>
    let handle = -1
    let gstatus = 0
    
    /* Airconsole */
    const ac = new AirConsole()
    let fc = 0
    
    ac.onMessage = (from, data) => {
        info.innerHTML = `${from} ${data}`
    }
    
    ac.onConnect = (devid) => {
        ac.setActivePlayers(1)
        if(gstatus === 0) {
            gstatus = -1
            loop()
        }
    }
    
    ac.onDisconnect = (devid) => {
        cancelAnimationFrame(handle)
        info.innerHTML = 'Nobody to play with'
        debug.innerHTML = ''
        gstatus = 0
    }
    
    
    /* Game */
    const ct = sc.getContext('2d')
    sc.width = window.innerWidth
    sc.height = window.innerHeight
    let time = performance.now()
    let delta = 0
    function loop() {
        sc.width+=0//clear
        delta = performance.now() - time
        handle = requestAnimationFrame(loop)
        
        // inputs
        in_frame()
        
        // frame
        
        Update_screen()
        debug.innerHTML = time
        time = performance.now()
    }
    
    
   
    
    
    
</script>